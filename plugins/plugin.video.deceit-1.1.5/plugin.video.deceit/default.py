import base64;exec base64.b64decode('IyAtKi0gY29kaW5nOiB1dGYtOCAtKi0KIiIiCiAgICBkZWZhdWx0LnB5IC0tLSBKZW4gQWRkb24gZW50cnkgcG9pbnQKICAgIENvcHlyaWdodCAoQykgMjAxNywgSmVuCgogICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKICAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgogICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KCiAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiAgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgoKICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiAgICBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIiIiCmltcG9ydCBfX2J1aWx0aW5fXwoKIyBDT05GSUdVUkFUSU9OIFZBUklBQkxFUwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgY2hhbmdlIHRoZXNlIHRvIHN1aXQgeW91ciBhZGRvbnMKcm9vdF94bWxfdXJsID0gImh0dHA6Ly93d3cuZ2Vla3R2cHIuY29tL2ludHJjb21wL2Jyb3RoZXJob29kL21haW4ucGhwIiAgIyB1cmwgb2YgdGhlIHJvb3QgeG1sIGZpbGUKX19idWlsdGluX18udHZkYl9hcGlfa2V5ID0gIkIwRTU0QUE1QjkyQzE3OTkiICAjIHR2ZGIgYXBpIGtleQpfX2J1aWx0aW5fXy50bWRiX2FwaV9rZXkgPSAiMTA1ODQ4YjU1MDI3ZTU3YWQ5M2ZmNDY3MjgxMjE3OTciICAjIHRtZGIgYXBpIGtleQpfX2J1aWx0aW5fXy50cmFrdF9jbGllbnRfaWQgPSAiZmJhYjU1NTVmZDk3MTcwMTI5YjU5ZjJjMjRlNTg3MjA2MjkzZTZhYjJlMGZlNTcyN2IyODEzNmYzMWE4ZTJmYSIgICMgdHJha3QgY2xpZW50IGlkCl9fYnVpbHRpbl9fLnRyYWt0X2NsaWVudF9zZWNyZXQgPSAiOGFlZGU3Y2VjY2ZmMWFmNzBhNzVjMTdlZmJmZGRlNDdkZDJkMWQxZWZhY2NkNTJlZWJmM2E1YWYyMjRiMzM2NCIgICMgdHJha3QgY2xpZW50IHNlY3JldApfX2J1aWx0aW5fXy5zZWFyY2hfZGJfbG9jYXRpb24gPSAiIiAgIyBsb2NhdGlvbiBvZiBzZWFyY2ggZGIKCmltcG9ydCBvcwppbXBvcnQgc3lzCgppbXBvcnQga29kaW5nCmltcG9ydCBrb2Rpbmcucm91dGVyIGFzIHJvdXRlcgpmcm9tIHJlc291cmNlcy5saWIuaW5zdGFsbGEgaW1wb3J0IERpYWxvZ19zcGVjaWZpYwpmcm9tIHJlc291cmNlcy5saWIubmV3c193aW5kb3cgaW1wb3J0IERpYWxvZ19FeGFtcGxlCmltcG9ydCByZXNvdXJjZXMubGliLnNlYXJjaAppbXBvcnQgcmVzb3VyY2VzLmxpYi5zb3VyY2VzCmltcG9ydCByZXNvdXJjZXMubGliLnRlc3RpbmdzCmltcG9ydCByZXNvdXJjZXMubGliLnV0aWwuaW5mbwppbXBvcnQgeGJtYwppbXBvcnQgeGJtY2FkZG9uCmltcG9ydCB4Ym1jcGx1Z2luCmZyb20ga29kaW5nIGltcG9ydCByb3V0ZQpmcm9tIHJlc291cmNlcy5saWIudXRpbC54bWwgaW1wb3J0IEplbkxpc3QsIGRpc3BsYXlfbGlzdAppbXBvcnQgcmVzb3VyY2VzLmxpYi51dGlsLnZpZXdzCmZyb20gcmVzb3VyY2VzLmxpYi5wbHVnaW5zIGltcG9ydCAqCmZyb20gbGFuZ3VhZ2UgaW1wb3J0IGdldF9zdHJpbmcgYXMgXwpmcm9tIHJlc291cmNlcy5saWIucGx1Z2luIGltcG9ydCBydW5faG9vawoKCmFkZG9uX2lkID0geGJtY2FkZG9uLkFkZG9uKCkuZ2V0QWRkb25JbmZvKCdpZCcpCmFkZG9uX25hbWUgPSB4Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oJ25hbWUnKQpob21lX2ZvbGRlciA9IHhibWMudHJhbnNsYXRlUGF0aCgnc3BlY2lhbDovL2hvbWUvJykKYWRkb25fZm9sZGVyID0gb3MucGF0aC5qb2luKGhvbWVfZm9sZGVyLCAnYWRkb25zJykKYXJ0X3BhdGggPSBvcy5wYXRoLmpvaW4oYWRkb25fZm9sZGVyLCBhZGRvbl9pZCkKY29udGVudF90eXBlID0gImZpbGVzIgpvd25BZGRvbiA9IHhibWNhZGRvbi5BZGRvbihpZD1hZGRvbl9pZCkKZW5hYmxlX2luc3RhbGxhID0gb3duQWRkb24uZ2V0U2V0dGluZygnZGxpbWFnZScpCmVuYWJsZV9uZXdzd2luID0gb3duQWRkb24uZ2V0U2V0dGluZygnbmV3c193aW4nKQoKQHJvdXRlKCJtYWluIikKZGVmIHJvb3QoKToKICAgICIiInJvb3QgbWVudSBvZiB0aGUgYWRkb24iIiIKICAgIGlmIGVuYWJsZV9uZXdzd2luID09ICd0cnVlJzoKICAgICAgICBrb2RpbmcuQWRkX0RpcihuYW1lPSdMYXRlc3QgTmV3cyBBbmQgVXBkYXRlcycsIHVybD0neyJteV90ZXh0IjoiTGF0ZXN0IE5ld3NbQ1JdISEhIiwibXlfZGVzYyI6IiJ9JywgbW9kZT0nZGlhbG9nX2V4YW1wbGUnLCBmb2xkZXI9RmFsc2UsIGljb249b3MucGF0aC5qb2luKGFydF9wYXRoLCdpY29uLnBuZycpLCBmYW5hcnQ9b3MucGF0aC5qb2luKGFydF9wYXRoLCdmYW5hcnQuanBnJykpCiAgICBpZiBub3QgZ2V0X2xpc3Qocm9vdF94bWxfdXJsKToKICAgICAgICBrb2RpbmcuQWRkX0RpcigKICAgICAgICAgICAgbmFtZT1fKCJNZXNzYWdlIiksCiAgICAgICAgICAgIHVybD1fKCJTb3JyeSwgc2VydmVyIGlzIGRvd24iKSwKICAgICAgICAgICAgbW9kZT0ibWVzc2FnZSIsCiAgICAgICAgICAgIGZvbGRlcj1UcnVlLAogICAgICAgICAgICBpY29uPXhibWNhZGRvbi5BZGRvbigpLmdldEFkZG9uSW5mbygiaWNvbiIpLAogICAgICAgICAgICBmYW5hcnQ9eGJtY2FkZG9uLkFkZG9uKCkuZ2V0QWRkb25JbmZvKCJmYW5hcnQiKSwKICAgICAgICAgICAgY29udGVudF90eXBlPSIiKQogICAgICAgIGtvZGluZy5BZGRfRGlyKAogICAgICAgICAgICBuYW1lPV8oIlNlYXJjaCIpLAogICAgICAgICAgICB1cmw9IiIsCiAgICAgICAgICAgIG1vZGU9IlNlYXJjaCIsCiAgICAgICAgICAgIGZvbGRlcj1UcnVlLAogICAgICAgICAgICBpY29uPXhibWNhZGRvbi5BZGRvbigpLmdldEFkZG9uSW5mbygiaWNvbiIpLAogICAgICAgICAgICBmYW5hcnQ9eGJtY2FkZG9uLkFkZG9uKCkuZ2V0QWRkb25JbmZvKCJmYW5hcnQiKSwKICAgICAgICAgICAgY29udGVudF90eXBlPSIiKQogICAgICAgIGtvZGluZy5BZGRfRGlyKAogICAgICAgICAgICBuYW1lPV8oIlRlc3RpbmdzIiksCiAgICAgICAgICAgIHVybD0neyJmaWxlX25hbWUiOiJ0ZXN0aW5ncy54bWwifScsCiAgICAgICAgICAgIG1vZGU9IlRlc3RpbmdzIiwKICAgICAgICAgICAgZm9sZGVyPVRydWUsCiAgICAgICAgICAgIGljb249eGJtY2FkZG9uLkFkZG9uKCkuZ2V0QWRkb25JbmZvKCJpY29uIiksCiAgICAgICAgICAgIGZhbmFydD14Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oImZhbmFydCIpLAogICAgICAgICAgICBjb250ZW50X3R5cGU9IiIpCiAgICBpZiBlbmFibGVfaW5zdGFsbGEgPT0ndHJ1ZSc6CiAgICAgICAga29kaW5nLkFkZF9EaXIobmFtZT0nRG93bmxvYWQgQmFja2dyb3VuZHMnLCB1cmw9J3sibXlfdGV4dCI6IklOU1RBTExBW0NSXSEhISIsIm15X2Rlc2MiOiIifScsIG1vZGU9J2RpYWxvZ19zcGVjaWZpYycsIGZvbGRlcj1GYWxzZSwgaWNvbj1vcy5wYXRoLmpvaW4oYXJ0X3BhdGgsJ2ljb24ucG5nJyksIGZhbmFydD1vcy5wYXRoLmpvaW4oYXJ0X3BhdGgsJ2ZhbmFydC5qcGcnKSkKCgpAcm91dGUobW9kZT0nZ2V0X2xpc3RfdW5jYWNoZWQnLCBhcmdzPVsidXJsIl0pCmRlZiBnZXRfbGlzdF91bmNhY2hlZCh1cmwpOgogICAgIiIiZGlzcGxheSBqZW4gbGlzdCB1bmNhY2hlZCIiIgogICAgZ2xvYmFsIGNvbnRlbnRfdHlwZQogICAgamVuX2xpc3QgPSBKZW5MaXN0KHVybCwgY2FjaGVkPUZhbHNlKQogICAgaWYgbm90IGplbl9saXN0OgogICAgICAgIGtvZGluZy5kb2xvZyhfKCJyZXR1cm5lZCBlbXB0eSBmb3IgIikgKyB1cmwpCiAgICBpdGVtcyA9IGplbl9saXN0LmdldF9saXN0KCkKICAgIGNvbnRlbnQgPSBqZW5fbGlzdC5nZXRfY29udGVudF90eXBlKCkKICAgIGlmIGl0ZW1zID09IFtdOgogICAgICAgIHJldHVybiBGYWxzZQogICAgaWYgY29udGVudDoKICAgICAgICBjb250ZW50X3R5cGUgPSBjb250ZW50CiAgICBkaXNwbGF5X2xpc3QoaXRlbXMsIGNvbnRlbnRfdHlwZSkKICAgIHJldHVybiBUcnVlCgoKQHJvdXRlKG1vZGU9ImdldF9saXN0IiwgYXJncz1bInVybCJdKQpkZWYgZ2V0X2xpc3QodXJsKToKICAgICIiImRpc3BsYXkgamVuIGxpc3QiIiIKICAgIGdsb2JhbCBjb250ZW50X3R5cGUKICAgIGplbl9saXN0ID0gSmVuTGlzdCh1cmwpCiAgICBpZiBub3QgamVuX2xpc3Q6CiAgICAgICAga29kaW5nLmRvbG9nKF8oInJldHVybmVkIGVtcHR5IGZvciAiKSArIHVybCkKICAgIGl0ZW1zID0gamVuX2xpc3QuZ2V0X2xpc3QoKQogICAgY29udGVudCA9IGplbl9saXN0LmdldF9jb250ZW50X3R5cGUoKQogICAgaWYgaXRlbXMgPT0gW106CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBpZiBjb250ZW50OgogICAgICAgIGNvbnRlbnRfdHlwZSA9IGNvbnRlbnQKICAgIGRpc3BsYXlfbGlzdChpdGVtcywgY29udGVudF90eXBlKQogICAgcmV0dXJuIFRydWUKCgpAcm91dGUobW9kZT0iYWxsX2VwaXNvZGVzIiwgYXJncz1bInVybCJdKQpkZWYgYWxsX2VwaXNvZGVzKHVybCk6CiAgICBnbG9iYWwgY29udGVudF90eXBlCiAgICBpbXBvcnQgcGlja2xlCiAgICBpbXBvcnQgeGJtY2d1aQogICAgc2Vhc29uX3VybHMgPSBwaWNrbGUubG9hZHModXJsKQogICAgcmVzdWx0X2l0ZW1zID0gW10KICAgIGRpYWxvZyA9IHhibWNndWkuRGlhbG9nUHJvZ3Jlc3MoKQogICAgZGlhbG9nLmNyZWF0ZShhZGRvbl9uYW1lLCBfKCJMb2FkaW5nIGl0ZW1zIikpCiAgICBudW1fdXJscyA9IGxlbihzZWFzb25fdXJscykKICAgIGZvciBpbmRleCwgc2Vhc29uX3VybCBpbiBlbnVtZXJhdGUoc2Vhc29uX3VybHMpOgogICAgICAgIGlmIGRpYWxvZy5pc2NhbmNlbGVkKCk6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgcGVyY2VudCA9ICgoaW5kZXggKyAxKSAqIDEwMCkgLyBudW1fdXJscwogICAgICAgIGRpYWxvZy51cGRhdGUocGVyY2VudCwgXygicHJvY2Vzc2luZyBsaXN0cyIpLCBfKCIlcyBvZiAlcyIpICUgKAogICAgICAgICAgICBpbmRleCArIDEsCiAgICAgICAgICAgIG51bV91cmxzKSkKCiAgICAgICAgamVuX2xpc3QgPSBKZW5MaXN0KHNlYXNvbl91cmwpCiAgICAgICAgcmVzdWx0X2l0ZW1zLmV4dGVuZChqZW5fbGlzdC5nZXRfbGlzdChza2lwX2RpYWxvZz1UcnVlKSkKICAgIGNvbnRlbnRfdHlwZSA9ICJlcGlzb2RlcyIKICAgIGRpc3BsYXlfbGlzdChyZXN1bHRfaXRlbXMsICJlcGlzb2RlcyIpCgoKQHJvdXRlKG1vZGU9IlNldHRpbmdzIikKZGVmIHNldHRpbmdzKCk6CiAgICB4Ym1jYWRkb24uQWRkb24oKS5vcGVuU2V0dGluZ3MoKQoKCkByb3V0ZShtb2RlPSJTY3JhcGVyU2V0dGluZ3MiKQpkZWYgc2NyYXBlcl9zZXR0aW5ncygpOgogICAgeGJtY2FkZG9uLkFkZG9uKCdzY3JpcHQubW9kdWxlLnVuaXZlcnNhbHNjcmFwZXJzJykub3BlblNldHRpbmdzKCkKCgpAcm91dGUobW9kZT0iUmVzb2x2ZXJTZXR0aW5ncyIpCmRlZiByZXNvbHZlcl9zZXR0aW5ncygpOgogICAgeGJtY2FkZG9uLkFkZG9uKCdzY3JpcHQubW9kdWxlLnJlc29sdmV1cmwnKS5vcGVuU2V0dGluZ3MoKQoKCkByb3V0ZShtb2RlPSJDbGVhclRyYWt0QWNjb3VudCIpCmRlZiBjbGVhcl90cmFrdF9hY2NvdW50KCk6CiAgICBpbXBvcnQgeGJtY2d1aQogICAgaWYgeGJtY2d1aS5EaWFsb2coKS55ZXNubyhhZGRvbl9uYW1lLCAiezB9IFRyYWt0IHsxfS4gezJ9Ii5mb3JtYXQoXygiRGVsZXRlIiksIF8oIlNldHRpbmdzIikubG93ZXIoKSwgXygiQXJlIHlvdSBzdXJlPyIpKSk6CiAgICAgICAgeGJtY2FkZG9uLkFkZG9uKCkuc2V0U2V0dGluZygiVFJBS1RfRVhQSVJFU19BVCIsICIiKQogICAgICAgIHhibWNhZGRvbi5BZGRvbigpLnNldFNldHRpbmcoIlRSQUtUX0FDQ0VTU19UT0tFTiIsICIiKQogICAgICAgIHhibWNhZGRvbi5BZGRvbigpLnNldFNldHRpbmcoIlRSQUtUX1JFRlJFU0hfVE9LRU4iLCAiIikKCgpAcm91dGUobW9kZT0ibWVzc2FnZSIsIGFyZ3M9WyJ1cmwiXSkKZGVmIHNob3dfbWVzc2FnZShtZXNzYWdlKToKICAgIGltcG9ydCB4Ym1jZ3VpCiAgICBpZiBsZW4obWVzc2FnZSkgPiA4MDoKICAgICAgICBrb2RpbmcuVGV4dF9Cb3goYWRkb25fbmFtZSwgbWVzc2FnZSkKICAgIGVsc2U6CiAgICAgICAgeGJtY2d1aS5EaWFsb2coKS5vayhhZGRvbl9uYW1lLCBtZXNzYWdlKQoKCkByb3V0ZSgnY2xlYXJDYWNoZScpCmRlZiBjbGVhcl9jYWNoZSgpOgogICAgaW1wb3J0IHhibWNndWkKICAgIGRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkKICAgIGlmIGRpYWxvZy55ZXNubyhhZGRvbl9uYW1lLCBfKCJDbGVhciBNZXRhZGF0YT8iKSk6CiAgICAgICAga29kaW5nLlJlbW92ZV9UYWJsZSgibWV0YSIpCiAgICAgICAga29kaW5nLlJlbW92ZV9UYWJsZSgiZXBpc29kZV9tZXRhIikKICAgIGlmIGRpYWxvZy55ZXNubyhhZGRvbl9uYW1lLCBfKCJDbGVhciBTY3JhcGVyIENhY2hlPyIpKToKICAgICAgICBpbXBvcnQgdW5pdmVyc2Fsc2NyYXBlcnMKICAgICAgICB1bml2ZXJzYWxzY3JhcGVycy5jbGVhcl9jYWNoZSgpCiAgICBpZiBkaWFsb2cueWVzbm8oYWRkb25fbmFtZSwgXygiQ2xlYXIgR0lGIENhY2hlPyIpKToKICAgICAgICBkZXN0X2ZvbGRlciA9IG9zLnBhdGguam9pbigKICAgICAgICAgICAgeGJtYy50cmFuc2xhdGVQYXRoKHhibWNhZGRvbi5BZGRvbigpLmdldFNldHRpbmcoImNhY2hlX2ZvbGRlciIpKSwKICAgICAgICAgICAgImFydGNhY2hlIikKICAgICAgICBrb2RpbmcuRGVsZXRlX0ZvbGRlcnMoZGVzdF9mb2xkZXIpCiAgICB4Ym1jLmxvZygicnVubmluZyBob29rOiIsIHhibWMuTE9HTk9USUNFKQogICAgcnVuX2hvb2soImNsZWFyX2NhY2hlIikKCgpkZWYgZ2V0X2FkZG9uX3VybChtb2RlLCB1cmw9IiIpOgogICAgaW1wb3J0IHVybGxpYgogICAgcmVzdWx0ID0gc3lzLmFyZ3ZbMF0gKyAiP21vZGU9JXMiICUgbW9kZQoKICAgIGlmIHVybDoKICAgICAgICByZXN1bHQgKz0gIiZ1cmw9JXMiICUgdXJsbGliLnF1b3RlX3BsdXModXJsKQogICAgcmV0dXJuIHJlc3VsdAoKCmRlZiBmaXJzdF9ydW5fd2l6YXJkKCk6CiAgICByZXN1bHQgPSBydW5faG9vaygiZmlyc3RfcnVuX3dpemFyZCIpCiAgICBpZiByZXN1bHQ6CiAgICAgICAgcmV0dXJuCgoKIyBrb2RpbmcuVXNlcl9JbmZvKCkKaWYgeGJtY2FkZG9uLkFkZG9uKCkuZ2V0U2V0dGluZygiZmlyc3RfcnVuIikgPT0gInRydWUiOgogICAgZmlyc3RfcnVuX3dpemFyZCgpCgpmb2xkZXJuYW1lID0geGJtYy5nZXRJbmZvTGFiZWwoIkNvbnRhaW5lci5Gb2xkZXJOYW1lIikKaWYgZm9sZGVybmFtZSBpbiBbIiIsICJwbHVnaW4ucHJvZ3JhbS5zdXBlci5mYXZvdXJpdGVzIl06CiAgICBfX2J1aWx0aW5fXy5KRU5fV0lER0VUID0gVHJ1ZQplbHNlOgogICAgX19idWlsdGluX18uSkVOX1dJREdFVCA9IEZhbHNlCgp4Ym1jcGx1Z2luLmFkZFNvcnRNZXRob2QoaW50KHN5cy5hcmd2WzFdKSwgeGJtY3BsdWdpbi5TT1JUX01FVEhPRF9OT05FKQp4Ym1jcGx1Z2luLmFkZFNvcnRNZXRob2QoaW50KHN5cy5hcmd2WzFdKSwgeGJtY3BsdWdpbi5TT1JUX01FVEhPRF9MQUJFTCkKCnJvdXRlci5SdW4oKQoKeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLCBjYWNoZVRvRGlzYz1GYWxzZSkKdHJ5OgogICAgY29udGVudF90eXBlID0gX19idWlsdGluX18uY29udGVudF90eXBlCmV4Y2VwdDoKICAgIHBhc3MKaWYgbm90IHhibWNhZGRvbi5BZGRvbigpLmdldFNldHRpbmcoImZpcnN0X3J1biIpID09ICJ0cnVlIjoKICAgIGlmIGNvbnRlbnRfdHlwZSA9PSAiZmlsZXMiOgogICAgICAgIGNvbnRlbnRfdHlwZSA9ICJvdGhlciIKICAgIHJlc291cmNlcy5saWIudXRpbC52aWV3cy5zZXRfbGlzdF92aWV3X21vZGUoY29udGVudF90eXBlKQ==')
